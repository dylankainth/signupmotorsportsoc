<!DOCTYPE html>
<html>
  <head>
    <!--
  Copyright (c) 2015 Jean-Marc VIGLINO, 
  released under CeCILL-B (french BSD like) licence: http://www.cecill.info/
-->
    <title>Harrow School Societies Fair</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>

    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />

    <!-- jQuery -->
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-1.11.0.min.js"
    ></script>

    <!-- Openlayers -->
    <link
      rel="stylesheet"
      href="https://openlayers.org/en/latest/legacy/ol.css"
    />
    <script
      type="text/javascript"
      src="https://openlayers.org/en/latest/legacy/ol.js"
    ></script>
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL,Object.assign"></script>

    <!-- ol-ext -->

    <!-- ol-ext -->
    <link
      rel="stylesheet"
      href="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.js"
    ></script>
    <!-- Pointer events polyfill for old browsers, see https://caniuse.com/#feat=pointer -->
    <script src="https://unpkg.com/elm-pep"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap"
      rel="stylesheet"
    />

    <style>
      .options input[type="number"] {
        width: 5em;
      }
      .options input[type="range"] {
        vertical-align: middle;
      }

      #map {
        width: 100vw;
        height: 600px;
      }

      .ol-viewport {
        border-radius: 10px;
      }
      .bg-harrowblue {
        background-color: #001844;
      }
      * {
        font-family: 'Roboto', sans-serif;
      }
      .navbar-title {
        font-weight: 500;
        font-size: 2rem;
        color:white;
      }
      body {
        background-color: #f5f5f5;
      }
    </style>
  </head>
  <body>
    <nav class="navbar bg-harrowblue">
      <div class="container-fluid">
        <h1 class="navbar-title mx-auto">
          Harrow School Societies Fair 2022
        </h1>
      </div>
    </nav>

    <!-- DIV pour la carte -->
    <main>
      <div id="map" class="map p-3"></div>
    </main>

    <script type="text/javascript">
      // The map
      var map = new ol.Map({
        target: "map",
        view: new ol.View({
          zoom: 21,
          center: [-37462.194786566186, 6723109.878285455],
          rotation: 1.17,
        }),
        layers: [new ol.layer.Tile({ source: new ol.source.OSM() })],
      });

      var geoimg = new ol.layer.GeoImage({
        name: "Georef",
        opacity: 1,
        source: new ol.source.GeoImage({
          url: "/map.jpg",
          imageCenter: [-37462.194786566186, 6723109.878285455],
          imageScale: [0.06, 0.06],
          imageCrop: [0, 0, 5526, 5000],
          //imageMask: [[273137.343,6242443.14],[273137.343,6245428.14],[276392.157,6245428.14],[276392.157,6242443.14],[273137.343,6242443.14]],
          imageRotate: Number((293 * Math.PI) / 180),
          projection: "EPSG:3857",
        }),
      });
      map.addLayer(geoimg);

      function resetSource() {
        geoimg.getSource().setCenter([x, y]);
        geoimg.getSource().setRotation(($("#rotate").val() * Math.PI) / 180);
        geoimg.getSource().setScale([sx, sy]);
        geoimg.getSource().setCrop([xmin, ymin, xmax, ymax]);
        var crop = geoimg.getSource().getCrop();
      }

      // Show extent in the layerswitcher
      //   map.addControl(new ol.control.LayerSwitcher({ extent:true }));
    </script>
  </body>
</html>
